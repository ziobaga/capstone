@model Capstone.Models.ViewModels.MatchListViewModel

<h2>Le Tue Partite</h2>
<table class="table">
    <thead>
        <tr>
            <th>Data</th>
            <th>Ora Inizio</th>
            <th>Campo</th>
            <th>Azioni</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var match in Model.UserMatches)
        {
            <tr>
                <td>@match.DataInizio.ToString("dd/MM/yyyy")</td>
                <td>@match.OraInizio.ToString(@"hh\:mm")</td>
                <td>@(match.Campo != null ? match.Campo.NomeCampo : "Campo non disponibile")</td>
                <td>
                    <a asp-action="EditMatch" asp-route-id="@match.Id" class="btn btn-warning">Modifica</a>
                    <a asp-action="DeleteMatch" asp-route-id="@match.Id" class="btn btn-danger">Annulla</a>
                    <a asp-action="MatchDetails" asp-route-id="@match.Id" class="btn btn-primary">Dettagli</a>
                </td>
            </tr>
        }
    </tbody>
</table>

<h2>Altre Partite</h2>
<table class="table">
    <thead>
        <tr>
            <th>Data</th>
            <th>Ora Inizio</th>
            <th>Campo</th>
            <th>Azioni</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var match in Model.OtherMatches)
        {
            <tr>
                <td>@match.DataInizio.ToString("dd/MM/yyyy")</td>
                <td>@match.OraInizio.ToString(@"hh\:mm")</td>
                <td>@(match.Campo != null ? match.Campo.NomeCampo : "Campo non disponibile")</td>
                <td>
                    <a asp-action="MatchDetails" asp-route-id="@match.Id" class="btn btn-primary">Dettagli</a>

                    @* Verifica se l'utente è già registrato per questa partita *@
                    @if (!Model.BookedMatchIds.Contains(match.Id))
                    {
                        <a asp-controller="Booking" asp-action="BookAndPay" asp-route-id="@match.Id" class="btn btn-success">Partecipa</a>
                    }
                    else
                    {
                        <span class="text-success">Già registrato</span>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
